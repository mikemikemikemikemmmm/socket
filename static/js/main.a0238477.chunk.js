(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(t,e,n){t.exports=n(91)},59:function(t,e){},87:function(t,e){},91:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(20),i=n.n(r),c=n(8),s=n(9),l=n(11),u=n(10),m=n(12),p=n(13),h=n(6),d=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={createRoomData:{isRandomColor:!0,gridNum:5,playerMaxNum:2,nowPlayerTurn:1},playerName:""},n}return Object(m.a)(e,t),Object(s.a)(e,[{key:"checkForm",value:function(){var t=""!==this.state.playerName,e=!(!Number(5<=this.state.createRoomData.gridNum)||!Number(this.state.createRoomData.gridNum<=30));return!0===t&&!0===e||(alert("\u8acb\u78ba\u8a8d\u540d\u5b57\u90fd\u6709\u586b\u4e0a\u4ee5\u53ca\u683c\u5b50\u6578\u57285~30\u4e4b\u9593"),!1)}},{key:"isNamePass",value:function(){return""!==this.state.playerName||(alert("\u8acb\u8f38\u5165\u540d\u5b57"),!1)}},{key:"createRoom",value:function(){if(!1!==this.checkForm()){var t=Object.assign({},this.state.createRoomData);t.playerName=this.state.playerName,this.props.createRoom(t)}}},{key:"joinRoom",value:function(t){this.isNamePass()&&this.props.joinRoom(t,this.state.playerName,!1)}},{key:"render",value:function(){var t=this,e=this.state.createRoomData,n=e.playerMaxNum;return a.a.createElement("div",null,"\u8acb\u9078\u64c7\u908a\u683c\u6578",a.a.createElement("input",{type:"number",min:"5",max:"30",defaultValue:"5",onChange:function(n){return t.setState({createRoomData:Object(p.a)({},e,{gridNum:Number(n.target.value)})})}}),"\u8acb\u9078\u64c7\u4eba\u6578",a.a.createElement("button",{disabled:n<=2,onClick:function(){return t.setState({createRoomData:Object(p.a)({},e,{playerMaxNum:e.playerMaxNum-1})})}},"-"),n,a.a.createElement("button",{disabled:n>=8,onClick:function(){return t.setState({createRoomData:Object(p.a)({},e,{playerMaxNum:e.playerMaxNum+1})})}},"+"),a.a.createElement("span",null,"\u8acb\u8f38\u5165\u540d\u7a31",a.a.createElement("input",{type:"text",onChange:function(e){return t.setState({playerName:e.target.value})}})),"\u984f\u8272\u5206\u914d \u96a8\u6a5f",a.a.createElement("input",{type:"radio",name:"color-radio",onChange:function(){return t.setState({createRoomData:Object(p.a)({},e,{isRandomColor:!0})})},checked:!0}),"\u540c\u8272",a.a.createElement("input",{type:"radio",name:"color-radio",onChange:function(){return t.setState({createRoomData:Object(p.a)({},e,{isRandomColor:!1})})}}),a.a.createElement("button",{onClick:function(){return t.createRoom()}},"\u5275\u9020\u623f\u9593"),a.a.createElement("div",null),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u623f\u9593\u865f\u78bc"),a.a.createElement("th",null,"\u76ee\u524d\u4eba\u6578"),a.a.createElement("th",null,"\u6700\u5927\u4eba\u6578"),a.a.createElement("th",null,"\u52a0\u5165\u623f\u9593"))),a.a.createElement("tbody",null,this.props.state.roomList.map(function(e){return a.a.createElement("tr",{key:e.roomId},a.a.createElement("td",null,e.roomId),a.a.createElement("td",null,e.playerData.length),a.a.createElement("td",null,e.playerMaxNum),a.a.createElement("td",null,a.a.createElement("button",{disabled:e.playerData.length>=e.playerMaxNum,onClick:function(){return t.joinRoom(e.roomId)}},"\u52a0\u5165\u623f\u9593")))}))))}}]),e}(o.Component),y=Object(h.b)(function(t){return{state:t}},function(t){return{dispatch:t}})(d),f=n(49),b=(n(59),function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={playerList:[]},n.isHost=!1,n}return Object(m.a)(e,t),Object(s.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){var n=this;if(t!==this.props){var o=t.state.roomList.find(function(t){return t.roomId===n.props.state.roomId});return!!o&&(this.setState({playerList:Object(f.a)(o.playerData)}),!1)}if(e!==this.state)return!0}},{key:"quitRoom",value:function(){this.props.quitRoom(this.props.state.isHost)}},{key:"errorRender",value:function(){this.props.back()}},{key:"componentDidMount",value:function(){0===this.props.state.roomList.length&&this.errorRender()}},{key:"render",value:function(){var t=this;return a.a.createElement("div",null,0!==this.state.playerList.length?a.a.createElement("div",null,a.a.createElement("button",{disabled:this.state.playerList.length<=1,onClick:function(){return t.startGame()}},"\u958b\u59cb\u904a\u6232"),a.a.createElement("button",{onClick:function(){return t.quitRoom()}},"\u8fd4\u56de\u5927\u5ef3"),"\u76ee\u524d\u73a9\u5bb6",this.state.playerList.map(function(t){return a.a.createElement("div",{key:t.id},t.playerName)})):null)}}]),e}(o.Component)),k=Object(h.b)(function(t){return{state:t}},function(t){return{dispatch:t}})(b),E=n(93),R=n(4),v="SET_PLAYERNAME",O="SET_ROOMLIST",j="SET_ROOMID",g="SET_ISHOST",N="SET_JOINEDROOMDATA";function D(t){return{type:N,payload:t}}function S(t){return{type:g,payload:t}}function I(t){return{type:v,payload:t}}function M(t){return{type:j,payload:t}}var C=function(t){function e(t){var o;return Object(c.a)(this,e),(o=Object(l.a)(this,Object(u.a)(e).call(this,t))).io=n(60),o.socket=o.io("https://sockt-245503.appspot.com/"),o.isPlaying=!1,o.history=Object(R.a)(),o.location=o.history.location,o.unlisten=o.history.listen(function(t,e){console.log("\u8df3\u8f49")}),o}return Object(m.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.initOn()}},{key:"initOn",value:function(){var t=this;this.socket.on("roomDelete",function(t){console.log(t)}),this.socket.on("renewRoomList",function(e){t.isPlaying||(t.props.dispatch({type:O,payload:e}),console.log("\u66f4\u65b0\u623f\u9593\u8cc7\u6599"))}),this.socket.on("changePlayerTurn",function(t){}),this.socket.on("makeAChess",function(t,e){}),this.socket.on("overGame"),this.socket.on("renewPlayerInRoom",function(t){}),this.socket.on("connect",function(){console.log("\u63a5\u53d7\u5230connect\u4e8b\u4ef6")})}},{key:"findMatchRoomData",value:function(){var t=this;return this.state.roomList.find(function(e){return e.id===t.state.roomId})}},{key:"joinRoom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this;this.socket=this.io("".concat("https://sockt-245503.appspot.com/").concat(t),{query:"playerName=".concat(e)}),this.socket.once("roomDelete",function(){o.quitRoom(n),alert("\u623f\u4e3b\u9000\u51fa")}),this.socket.once("connect",function(){console.log("\u63a5\u53d7\u5230\u623f\u9593connect\u4e8b\u4ef6"),o.socket.once("sendRoomData",function(t){o.props.dispatch(D(t)),o.props.dispatch(S(n))}),o.props.dispatch(M(t)),o.props.dispatch(I(e)),o.history.push("/room/".concat(t))})}},{key:"quitRoom",value:function(t){console.log("\u9000\u56de\u5927\u5ef3"),t&&(this.socket.emit("hostDisconnect"),console.log("\u623f\u4e3b\u9000\u51fa")),this.history.push("/"),this.socket.close(),this.socket=this.io("https://sockt-245503.appspot.com/"),this.props.dispatch(M(null)),this.props.dispatch(I("")),this.props.dispatch(S(!1)),this.props.dispatch(D(null))}},{key:"createRoom",value:function(t){var e=this;this.socket.emit("createRoom",t),this.socket.once("createRoomDone",function(n){e.joinRoom(n,t.playerName,!0)})}},{key:"render",value:function(){var t=this;return a.a.createElement(E.b,{history:this.history},a.a.createElement("section",null,a.a.createElement(E.c,null,a.a.createElement(E.a,{path:"/room/:roomId",render:function(){return a.a.createElement(k,{quitRoom:function(e){return t.quitRoom(e)},back:function(){return t.history.push("/")}})}}),a.a.createElement(E.a,{path:"/",render:function(){return a.a.createElement(y,{joinRoom:function(e,n,o){return t.joinRoom(e,n,o)},createRoom:function(e){return t.createRoom(e)}})}}))))}}]),e}(o.Component),T=Object(h.b)(function(t){return{state:t}},function(t){return{dispatch:t}})(C),w=n(22),L={roomId:null,roomList:[],playerName:"",isHost:!1,joinedRoomData:{}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_JOINEDROOMDATA":return Object.assign({},t,{joinedRoomData:e.payload});case"SET_ROOMID":return Object.assign({},t,{roomId:e.payload});case"SET_ROOMLIST":return Object.assign({},t,{roomList:e.payload});case"SET_PLAYERNAME":return Object.assign({},t,{playerName:e.payload});case"SET_ISHOST":return Object.assign({},t,{isHost:e.payload});default:return t}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=Object(w.b)(x);i.a.render(a.a.createElement(h.a,{store:_},a.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[50,1,2]]]);
//# sourceMappingURL=main.a0238477.chunk.js.map